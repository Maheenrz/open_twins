"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[301],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=p(n),d=i,h=m["".concat(s,".").concat(d)]||m[d]||u[d]||r;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[m]="string"==typeof e?e:i,o[1]=l;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(7294),i=n(6010);const r={tabItem:"tabItem_Ymn6"};function o(e){let{children:t,hidden:n,className:o}=e;return a.createElement("div",{role:"tabpanel",className:(0,i.Z)(r.tabItem,o),hidden:n},t)}},5488:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(7462),i=n(7294),r=n(6010),o=n(2389),l=n(7392),s=n(7094),p=n(2466);const c={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function m(e){const{lazy:t,block:n,defaultValue:o,values:m,groupId:u,className:d}=e,h=i.Children.map(e.children,(e=>{if((0,i.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),k=m??h.map((e=>{let{props:{value:t,label:n,attributes:a}}=e;return{value:t,label:n,attributes:a}})),f=(0,l.l)(k,((e,t)=>e.value===t.value));if(f.length>0)throw new Error(`Docusaurus error: Duplicate values "${f.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const g=null===o?o:o??h.find((e=>e.props.default))?.props.value??h[0].props.value;if(null!==g&&!k.some((e=>e.value===g)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${g}" but none of its children has the corresponding value. Available values are: ${k.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:N,setTabGroupChoices:b}=(0,s.U)(),[v,y]=(0,i.useState)(g),w=[],{blockElementScrollPositionUntilNextRender:T}=(0,p.o5)();if(null!=u){const e=N[u];null!=e&&e!==v&&k.some((t=>t.value===e))&&y(e)}const O=e=>{const t=e.currentTarget,n=w.indexOf(t),a=k[n].value;a!==v&&(T(t),y(a),null!=u&&b(u,String(a)))},E=e=>{let t=null;switch(e.key){case"Enter":O(e);break;case"ArrowRight":{const n=w.indexOf(e.currentTarget)+1;t=w[n]??w[0];break}case"ArrowLeft":{const n=w.indexOf(e.currentTarget)-1;t=w[n]??w[w.length-1];break}}t?.focus()};return i.createElement("div",{className:(0,r.Z)("tabs-container",c.tabList)},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},d)},k.map((e=>{let{value:t,label:n,attributes:o}=e;return i.createElement("li",(0,a.Z)({role:"tab",tabIndex:v===t?0:-1,"aria-selected":v===t,key:t,ref:e=>w.push(e),onKeyDown:E,onClick:O},o,{className:(0,r.Z)("tabs__item",c.tabItem,o?.className,{"tabs__item--active":v===t})}),n??t)}))),t?(0,i.cloneElement)(h.filter((e=>e.props.value===v))[0],{className:"margin-top--md"}):i.createElement("div",{className:"margin-top--md"},h.map(((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==v})))))}function u(e){const t=(0,o.Z)();return i.createElement(m,(0,a.Z)({key:String(t)},e))}},7861:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>p,toc:()=>m});var a=n(7462),i=(n(7294),n(3905)),r=n(5488),o=n(5162);const l={sidebar_position:3},s="Machine Learning",p={unversionedId:"installation/manual/machine-learning",id:"installation/manual/machine-learning",title:"Machine Learning",description:"Prerequisites",source:"@site/docs/installation/manual/machine-learning.md",sourceDirName:"installation/manual",slug:"/installation/manual/machine-learning",permalink:"/opentwins/docs/installation/manual/machine-learning",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/installation/manual/machine-learning.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Composition (recommended)",permalink:"/opentwins/docs/installation/manual/composition"},next:{title:"Simulations",permalink:"/opentwins/docs/installation/manual/simulations"}},c={},m=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Deploy",id:"deploy",level:2},{value:"Kafka-ML",id:"kafka-ml",level:3},{value:"Eclipse Hono to Kafka-ML",id:"eclipse-hono-to-kafka-ml",level:3},{value:"Error detection for Eclipse Hono with Kafka-ML",id:"error-detection-for-eclipse-hono-with-kafka-ml",level:3},{value:"Connect",id:"connect",level:2},{value:"Connection example",id:"connection-example",level:3}],u={toc:m},d="wrapper";function h(e){let{components:t,...l}=e;return(0,i.kt)(d,(0,a.Z)({},u,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"machine-learning"},"Machine Learning"),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("p",null,"Before you begin, ensure you have the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Container manager: Currently tested on ",(0,i.kt)("a",{parentName:"li",href:"https://www.docker.com/"},"Docker")," and ",(0,i.kt)("a",{parentName:"li",href:"https://containerd.io/"},"ContainerD"),"."),(0,i.kt)("li",{parentName:"ul"},"Access to a ",(0,i.kt)("a",{parentName:"li",href:"https://kubernetes.io/releases/download/"},"Kubernetes")," cluster."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"kubectl")," installed and configured.")),(0,i.kt)("h2",{id:"deploy"},"Deploy"),(0,i.kt)("p",null,"To enable machine learning-based data prediction in OpenTwins, you must integrate Kafka-ML along with a service that supplies the required input data for the models. Refer to the ",(0,i.kt)("a",{parentName:"p",href:"/opentwins/docs/overview/architecture#data-prediction-with-machine-learning"},"architecture")," documentation to understand how this component interacts with the overall system."),(0,i.kt)("p",null,"Although OpenTwins includes two built-in services for this purpose, they both depend on Eclipse Hono, which we currently do not recommend. ",(0,i.kt)("strong",{parentName:"p"},"We strongly advise developing a custom service that sends input data to the Kafka-ML topic"),", ensuring it aligns with the specific requirements of your digital twin. This service can obtain the data from the related digital twin as well as from other twins, either real-time via Eclipse Ditto or historical from InfluxDB."),(0,i.kt)("h3",{id:"kafka-ml"},"Kafka-ML"),(0,i.kt)("p",null,"To install Kafka-ML, follow the official instructions in its ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/ertis-research/kafka-ml"},"GitHub repository"),". Kafka-ML can be deployed in a Kubernetes cluster (recommended) or locally, depending on your infrastructure needs."),(0,i.kt)("p",null,"Kafka-ML facilitates seamless integration of machine learning models with Kafka. It provides the capability to:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Upload models from TensorFlow or PyTorch."),(0,i.kt)("li",{parentName:"ul"},"Train models directly within the system."),(0,i.kt)("li",{parentName:"ul"},"Deploy models for real-time inference using Kafka streams.")),(0,i.kt)("p",null,"The Kafka-ML workflow is as follows:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Input data is sent through a designated Kafka topic to trigger model inference."),(0,i.kt)("li",{parentName:"ol"},"Kafka-ML processes the data and runs the prediction."),(0,i.kt)("li",{parentName:"ol"},"The predicted results are returned via an output Kafka topic.")),(0,i.kt)("p",null,"For an in-depth understanding of Kafka-ML\u2019s features and configuration, we highly recommend consulting the official user guide available in its ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/ertis-research/kafka-ml"},"GitHub repository"),"."),(0,i.kt)("p",null,"In OpenTwins documentation, ",(0,i.kt)("strong",{parentName:"p"},"we assume that models are already deployed, trained, and ready for inference within Kafka-ML.")),(0,i.kt)("h3",{id:"eclipse-hono-to-kafka-ml"},"Eclipse Hono to Kafka-ML"),(0,i.kt)("admonition",{type:"warning"},(0,i.kt)("p",{parentName:"admonition"},"This component is currently ",(0,i.kt)("strong",{parentName:"p"},"unused")," because ",(0,i.kt)("strong",{parentName:"p"},"Eclipse Hono")," has been deprecated.",(0,i.kt)("br",{parentName:"p"}),"\n","The plan is to migrate this component to the new architecture so that it reads data directly from ",(0,i.kt)("strong",{parentName:"p"},"Eclipse Ditto"),", ensuring a more efficient and scalable integration.")),(0,i.kt)("h3",{id:"error-detection-for-eclipse-hono-with-kafka-ml"},"Error detection for Eclipse Hono with Kafka-ML"),(0,i.kt)("admonition",{type:"warning"},(0,i.kt)("p",{parentName:"admonition"},"This component is currently ",(0,i.kt)("strong",{parentName:"p"},"unused")," because ",(0,i.kt)("strong",{parentName:"p"},"Eclipse Hono")," has been deprecated.",(0,i.kt)("br",{parentName:"p"}),"\n","The plan is to migrate this component to the new architecture so that it reads data directly from ",(0,i.kt)("strong",{parentName:"p"},"Eclipse Ditto"),", ensuring a more efficient and scalable integration.")),(0,i.kt)("h2",{id:"connect"},"Connect"),(0,i.kt)("p",null,"To integrate Kafka-ML with OpenTwins, you need to establish an Eclipse Ditto connection in OpenTwins. This connection enables OpenTwins to receive data from Kafka-ML and update the corresponding digital twin. The process involves defining an Eclipse Ditto ",(0,i.kt)("a",{parentName:"p",href:"https://eclipse.dev/ditto/3.3/connectivity-mapping.html#javascript-mapping-engine"},"JavaScript mapping")," to convert incoming messages into the ",(0,i.kt)("a",{parentName:"p",href:"https://eclipse.dev/ditto/3.3/protocol-examples-mergefeatures.html"},"Ditto Protocol"),"."),(0,i.kt)("p",null,"The connection must follow this data flow:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Kafka-ML")," generates predictions and send data to ",(0,i.kt)("strong",{parentName:"li"},"Apache Kafka"),".  "),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Eclipse Ditto")," receives the data via a configured connection.  "),(0,i.kt)("li",{parentName:"ol"},"The ",(0,i.kt)("strong",{parentName:"li"},"JavaScript mapping")," in Eclipse Ditto processes the data and updates the corresponding digital twin in OpenTwins.  ")),(0,i.kt)("h3",{id:"connection-example"},"Connection example"),(0,i.kt)("p",null,"Consider a ",(0,i.kt)("strong",{parentName:"p"},"machine learning model")," in Kafka-ML that predicts ",(0,i.kt)("strong",{parentName:"p"},"humidity")," and ",(0,i.kt)("strong",{parentName:"p"},"temperature")," for a device. The model outputs data in the format ",(0,i.kt)("inlineCode",{parentName:"p"},"[humidity, temperature]"),"."),(0,i.kt)("p",null,"In OpenTwins, a twin exists with the ID ",(0,i.kt)("inlineCode",{parentName:"p"},"example:sensor"),", containing two features: ",(0,i.kt)("strong",{parentName:"p"},"humidity")," and ",(0,i.kt)("strong",{parentName:"p"},"temperature"),". Each feature in Eclipse Ditto ",(0,i.kt)("a",{parentName:"p",href:"https://eclipse.dev/ditto/3.3/basic-thing.html#api-version-2"},"must include")," properties and a value. The following image shows the structure of the digital twin in Eclipse Ditto:"),(0,i.kt)("center",null,(0,i.kt)("img",{src:n(9663).Z,alt:"Example digital twin structure",style:{width:300}})),(0,i.kt)("p",null,"To establish the connection between Kafka-ML and OpenTwins, you need to create an ",(0,i.kt)("a",{parentName:"p",href:"https://eclipse.dev/ditto/3.3/connectivity-protocol-bindings-kafka2.html"},"Apache Kafka connection in Eclipse Ditto"),". This connection receives and transforms predictions from Kafka-ML."),(0,i.kt)("p",null,"In the connection, a JavaScript mapping must be defined to transform messages from Apache Kafka. The mapping reads incoming messages, converts them to JSON, extracts values for each feature, and formats the message according to the Ditto Protocol before sending it. The function name ",(0,i.kt)("em",{parentName:"p"},"mapToDittoProtocolMsg")," and the return ",(0,i.kt)("em",{parentName:"p"},"Ditto.buildDittoProtocolMsg")," must always be included. The return value can be a single Ditto message or a list of Ditto messages."),(0,i.kt)("p",null,"Here is the JavaScript mapping for this example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"function mapToDittoProtocolMsg(headers, textPayload, bytePayload, contentType) {\n    const jsonData = JSON.parse(textPayload);\n    const humidity = jsonData[0];\n    const temperature = jsonData[1];\n\n    headers = Object.assign(headers, { 'Content-Type': 'application/merge-patch+json' });\n\n    var features = {\n          humidity: {\n               properties: {\n                    value: humidity \n               }\n         },\n         temperature: {\n              properties: {\n                   value: temperature\n              }\n         }\n    };\n\n    return Ditto.buildDittoProtocolMsg(\n        'example',\n        'sensor', \n        'things',\n        'twin',\n        'commands',\n        'merge',\n        '/features',\n        headers,\n        features\n    );\n}\n")),(0,i.kt)("p",null,"In OpenTwins, there are two ways to create the connection: via the ",(0,i.kt)("strong",{parentName:"p"},"OpenTwins UI")," or the ",(0,i.kt)("strong",{parentName:"p"},"Eclipse Ditto API"),". In both cases we recommend to refer to the ",(0,i.kt)("a",{parentName:"p",href:"https://eclipse.dev/ditto/3.3/connectivity-overview.html"},"Eclipse Ditto documentation"),"."),(0,i.kt)(r.Z,{groupId:"environment",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"ui",label:"OpenTwins UI",default:!0,mdxType:"TabItem"},(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"In Grafana, open the OpenTwins app from the left-side menu.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Navigate to the ",(0,i.kt)("strong",{parentName:"p"},"Connections")," section and click ",(0,i.kt)("strong",{parentName:"p"},"Create new connection"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Select ",(0,i.kt)("strong",{parentName:"p"},"Kafka")," as the connection type and fill in the required details for the Apache Kafka broker."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Provide a unique identifier for the connection (avoid special characters except -)."),(0,i.kt)("li",{parentName:"ul"},"If authentication is required, include the username and password in the URI."),(0,i.kt)("li",{parentName:"ul"},"The bootstrap servers usually match the URI."),(0,i.kt)("li",{parentName:"ul"},"Leave other fields as default unless necessary."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Under ",(0,i.kt)("strong",{parentName:"p"},"Message Mapping"),", click Add JavaScript Mapping, enter an identifier, and paste the JavaScript code from above.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Under ",(0,i.kt)("strong",{parentName:"p"},"Sources"),", click Add Source, then:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Specify the ",(0,i.kt)("strong",{parentName:"li"},"Kafka topic")," where Kafka-ML outputs predictions."),(0,i.kt)("li",{parentName:"ul"},"Set ",(0,i.kt)("strong",{parentName:"li"},"Authorization Context")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"pre-authenticated:kafkaml-connection"),"."),(0,i.kt)("li",{parentName:"ul"},"Select the previously defined JavaScript mapping under ",(0,i.kt)("strong",{parentName:"li"},"Payload Mapping"),"."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click ",(0,i.kt)("strong",{parentName:"p"},"Create Connection"),". If a success message appears, the ",(0,i.kt)("strong",{parentName:"p"},"Kafka-ML model is now connected"),".")))),(0,i.kt)(o.Z,{value:"api",label:"Eclipse Ditto API",mdxType:"TabItem"},(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"If you are using ",(0,i.kt)("strong",{parentName:"p"},"Minikube"),", you must expose the Eclipse Ditto nginx service in order to access it from your ",(0,i.kt)("em",{parentName:"p"},"localhost"),". To do this, find the name of the service with ",(0,i.kt)("inlineCode",{parentName:"p"},"kubectl get services")," and then run ",(0,i.kt)("inlineCode",{parentName:"p"},"minikube service <service-name> --url"),".")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Open an API tool such as ",(0,i.kt)("a",{parentName:"p",href:"https://www.postman.com/"},"Postman"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Create a ",(0,i.kt)("strong",{parentName:"p"},"JSON payload")," for the connection configuration based on the ",(0,i.kt)("a",{parentName:"p",href:"https://eclipse.dev/ditto/3.3/connectivity-protocol-bindings-kafka2.html#establishing-connecting-to-an-apache-kafka-endpoint"},"Eclipse Ditto documentation"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Embed the JavaScript mapping within the JSON configuration."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Ensure all lines end with semicolons (;)."),(0,i.kt)("li",{parentName:"ul"},"Use ",(0,i.kt)("strong",{parentName:"li"},"single quotes")," ('), not double quotes (\")."),(0,i.kt)("li",{parentName:"ul"},"Remove all line breaks."),(0,i.kt)("li",{parentName:"ul"},"If issues arise, replace single quotes with \\u0027."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Add the ",(0,i.kt)("strong",{parentName:"p"},"source configuration"),", including the Kafka topic and ",(0,i.kt)("strong",{parentName:"p"},"JavaScript mapping identifier"),". Example JSON payload for output topic ",(0,i.kt)("inlineCode",{parentName:"p"},"kafkaml-output-topic"),":"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "kafkaml-source-connection",\n    "connectionType": "kafka",\n    "connectionStatus": "open",\n    "uri": "tcp://{KAFKA-IP}:{KAFKA-PORT}",\n    "specificConfig": {\n        "saslMechanism": "plain",\n        "bootstrapServers": "{KAFKA-IP}:{KAFKA-PORT}"\n    },\n    "sources": [\n        {\n            "addresses": [\n                "kafkaml-output-topic"\n            ],\n            "qos": 1,\n            "authorizationContext": [\n                "pre-authenticated:kafkaml-connection"\n            ],\n            "payloadMapping": [\n                "jsmapping"\n            ]\n        }\n    ],\n    "targets": [],\n    "clientCount": 1,\n    "mappingDefinitions": {\n        "jsmapping": {\n            "mappingEngine": "JavaScript",\n            "options": {\n                "incomingScript": "function mapToDittoProtocolMsg(headers, textPayload, bytePayload, contentType) { const jsonData = JSON.parse(textPayload); const humidity = jsonData[0]; const temperature = jsonData[1]; headers = Object.assign(headers, { \'Content-Type\': \'application/merge-patch+json\' }); var features = { humidity: { properties: { value: humidity } }, temperature: { properties: { value: temperature } } }; return Ditto.buildDittoProtocolMsg( \'example\', \'sensor\', \'things\', \'twin\', \'commands\', \'merge\', \'/features\', headers, features ); }"\n            }\n        }\n    },\n    "tags": []\n}\n'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Send a ",(0,i.kt)("a",{parentName:"p",href:"https://eclipse.dev/ditto/3.3/http-api-doc.html#/Connections/put_api_2_connections__connectionId_"},(0,i.kt)("strong",{parentName:"a"},"PUT request"))," to:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"http://{ECLIPSE_DITTO_URI}/api/2/connections/{ID_CONNECTION}\n")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Include the JSON payload created earlier as the ",(0,i.kt)("strong",{parentName:"li"},"request body"),"."),(0,i.kt)("li",{parentName:"ul"},"Replace ",(0,i.kt)("inlineCode",{parentName:"li"},"{ECLIPSE_DITTO_URI}")," with the corresponding Eclipse Ditto IP and port."),(0,i.kt)("li",{parentName:"ul"},"Replace ",(0,i.kt)("inlineCode",{parentName:"li"},"{ID_CONNECTION}")," with the desired connection identifier (e.g., ",(0,i.kt)("inlineCode",{parentName:"li"},"kafkaml-source-connection"),")."),(0,i.kt)("li",{parentName:"ul"},"Use ",(0,i.kt)("strong",{parentName:"li"},"Basic Authentication")," with the default username (",(0,i.kt)("inlineCode",{parentName:"li"},"devops"),") and password (",(0,i.kt)("inlineCode",{parentName:"li"},"foobar"),"), or use the configured credentials.")))))),(0,i.kt)("p",null,"Once the integration is complete, Kafka-ML predictions will be processed and updated in OpenTwins. For example, if Kafka-ML outputs ",(0,i.kt)("inlineCode",{parentName:"p"},"[23.45, 23.12]"),", the update message to digital twin will appear as follows:"),(0,i.kt)("center",null,(0,i.kt)("img",{src:n(1813).Z,alt:"Example digital twin message",style:{width:300}})),(0,i.kt)("p",null,"With this setup, ",(0,i.kt)("strong",{parentName:"p"},"a machine learning model in Kafka-ML and OpenTwins are connected"),". Once the model is activated (via a script or any other method you choose), the generated data will automatically update the specified digital twin according to your configured settings. Additionally, in InfluxDB, you can differentiate between generated and real data using the authorization context."))}h.isMDXComponent=!0},9663:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/kafkaml1-b35ebeda10b15485978dbb4cbe97c470.png"},1813:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/kafkaml2-a3c60ef317e6cc7ead6f35b9eda188fe.png"}}]);