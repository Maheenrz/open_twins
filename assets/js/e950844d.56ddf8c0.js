"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3734],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>f});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=p(a),m=r,f=c["".concat(s,".").concat(m)]||c[m]||d[m]||i;return a?n.createElement(f,l(l({ref:t},u),{},{components:a})):n.createElement(f,l({ref:t},u))}));function f(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[c]="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},5162:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(7294),r=a(6010);const i={tabItem:"tabItem_Ymn6"};function l(e){let{children:t,hidden:a,className:l}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(i.tabItem,l),hidden:a},t)}},5488:(e,t,a)=>{a.d(t,{Z:()=>d});var n=a(7462),r=a(7294),i=a(6010),l=a(2389),o=a(7392),s=a(7094),p=a(2466);const u={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function c(e){const{lazy:t,block:a,defaultValue:l,values:c,groupId:d,className:m}=e,f=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),g=c??f.map((e=>{let{props:{value:t,label:a,attributes:n}}=e;return{value:t,label:a,attributes:n}})),h=(0,o.l)(g,((e,t)=>e.value===t.value));if(h.length>0)throw new Error(`Docusaurus error: Duplicate values "${h.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const y=null===l?l:l??f.find((e=>e.props.default))?.props.value??f[0].props.value;if(null!==y&&!g.some((e=>e.value===y)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${y}" but none of its children has the corresponding value. Available values are: ${g.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:b,setTabGroupChoices:k}=(0,s.U)(),[v,w]=(0,r.useState)(y),N=[],{blockElementScrollPositionUntilNextRender:T}=(0,p.o5)();if(null!=d){const e=b[d];null!=e&&e!==v&&g.some((t=>t.value===e))&&w(e)}const O=e=>{const t=e.currentTarget,a=N.indexOf(t),n=g[a].value;n!==v&&(T(t),w(n),null!=d&&k(d,String(n)))},x=e=>{let t=null;switch(e.key){case"Enter":O(e);break;case"ArrowRight":{const a=N.indexOf(e.currentTarget)+1;t=N[a]??N[0];break}case"ArrowLeft":{const a=N.indexOf(e.currentTarget)-1;t=N[a]??N[N.length-1];break}}t?.focus()};return r.createElement("div",{className:(0,i.Z)("tabs-container",u.tabList)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":a},m)},g.map((e=>{let{value:t,label:a,attributes:l}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:v===t?0:-1,"aria-selected":v===t,key:t,ref:e=>N.push(e),onKeyDown:x,onClick:O},l,{className:(0,i.Z)("tabs__item",u.tabItem,l?.className,{"tabs__item--active":v===t})}),a??t)}))),t?(0,r.cloneElement)(f.filter((e=>e.props.value===v))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},f.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==v})))))}function d(e){const t=(0,l.Z)();return r.createElement(c,(0,n.Z)({key:String(t)},e))}},3498:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>f,frontMatter:()=>o,metadata:()=>p,toc:()=>c});var n=a(7462),r=(a(7294),a(3905)),i=a(5488),l=a(5162);const o={sidebar_position:5},s="3D representation",p={unversionedId:"installation/manual/unity",id:"installation/manual/unity",title:"3D representation",description:"Prerequisites",source:"@site/docs/installation/manual/unity.md",sourceDirName:"installation/manual",slug:"/installation/manual/unity",permalink:"/opentwins/docs/installation/manual/unity",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/installation/manual/unity.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Simulations",permalink:"/opentwins/docs/installation/manual/simulations"},next:{title:"Guides",permalink:"/opentwins/docs/guides/"}},u={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Deploy",id:"deploy",level:2},{value:"Unity panel plugin for Grafana",id:"unity-panel-plugin-for-grafana",level:3},{value:"Connect",id:"connect",level:2}],d={toc:c},m="wrapper";function f(e){let{components:t,...o}=e;return(0,r.kt)(m,(0,n.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"3d-representation"},"3D representation"),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"Before you begin, make sure you have the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A container manager: Currently tested on ",(0,r.kt)("a",{parentName:"li",href:"https://www.docker.com/"},"Docker")," and ",(0,r.kt)("a",{parentName:"li",href:"https://containerd.io/"},"ContainerD"),"."),(0,r.kt)("li",{parentName:"ul"},"Access to a ",(0,r.kt)("a",{parentName:"li",href:"https://kubernetes.io/releases/download/"},"Kubernetes")," (recommended) or ",(0,r.kt)("a",{parentName:"li",href:"https://k3s.io/"},"K3s")," cluster."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"kubectl")," installed and properly configured.")),(0,r.kt)("h2",{id:"deploy"},"Deploy"),(0,r.kt)("p",null,"To integrate OpenTwins with a 3D representation using Unity, you need to add a specific plugin to Grafana. For more details on its functionality and how it connects with other components, refer to the ",(0,r.kt)("a",{parentName:"p",href:"/opentwins/docs/overview/architecture#3d-representation"},"architecture")," section."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"This plugin only displays 3D models developed in Unity and exported as WebGL. It does not support model development. ",(0,r.kt)("strong",{parentName:"p"},"To create or modify 3D models, you need to install ",(0,r.kt)("a",{parentName:"strong",href:"https://unity.com/es/download"},"Unity"),"."))),(0,r.kt)("h3",{id:"unity-panel-plugin-for-grafana"},"Unity panel plugin for Grafana"),(0,r.kt)("p",null,"The code of this plugin can be found in ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ertis-research/grafana-panel-unity"},"his repository")," and the latest version of the plugin will always be compiled in a zip file as a ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ertis-research/grafana-panel-unity/releases/tag/latest"},"release"),"."),(0,r.kt)("p",null,"The installation of the Unity plugin in Grafana will depend on how Grafana was installed and the version you are using. Below, we explain the process for installations done via Helm and for local installations. However, it is highly recommended to check the ",(0,r.kt)("a",{parentName:"p",href:"https://grafana.com/docs/grafana/latest/administration/plugin-management/#install-grafana-plugins"},"official Grafana documentation")," for detailed instructions on plugin installation, as there may be specific variations depending on your environment or version."),(0,r.kt)(i.Z,{groupId:"environment",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"helm",label:"Helm",default:!0,mdxType:"TabItem"},(0,r.kt)("p",null,"To install the plugin you need to add its compiled code in a folder with the same name as its ID inside the Grafana plugins folder, which is ",(0,r.kt)("em",{parentName:"p"},"/var/lib/grafana/plugins")," by default.\nFor Helm-based deployments, you can achieve this by adding an ",(0,r.kt)("inlineCode",{parentName:"p"},"extraInitContainer")," to your ",(0,r.kt)("inlineCode",{parentName:"p"},"values.yaml")," file. This container will navigate to the plugins folder, download the latest release zip file, and unzip it."),(0,r.kt)("p",null,"Below is the necessary configuration:"),(0,r.kt)("admonition",{type:"danger"},(0,r.kt)("p",{parentName:"admonition"},"Some keys may overlap with existing ones in your ",(0,r.kt)("inlineCode",{parentName:"p"},"values.yaml")," file. ",(0,r.kt)("strong",{parentName:"p"},"Do not copy and paste blindly, merge them carefully"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:"title=values.yaml",title:"values.yaml"},"extraInitContainers:\n- name: install-opentwins-plugins\n  image: busybox\n  command:\n    - /bin/sh\n    - -c\n    - |\n      #!/bin/sh\n      set -euo pipefail\n      mkdir -p /grafana-storage/plugins\n      cd /grafana-storage/plugins\n      wget --no-check-certificate -O ertis-unity-panel.zip https://github.com/ertis-research/grafana-panel-unity/releases/download/latest/ertis-unity-panel.zip\n      unzip -o ertis-unity-panel.zip\n      rm ertis-unity-panel.zip\n  volumeMounts:\n  - name: storage\n    mountPath: /grafana-storage\n")),(0,r.kt)("p",null,"Since the plugin is currently unsigned, you need to explicitly allow its use in Grafana by adding its ID (",(0,r.kt)("em",{parentName:"p"},"ertis-unity-panel"),") to the list of unsigned plugins in your ",(0,r.kt)("inlineCode",{parentName:"p"},"values.yaml")," file. This step ensures Grafana recognizes the plugin; otherwise, it will not appear in the UI.\nBelow is what you need to add (note that if you have followed the manual installation of the ",(0,r.kt)("a",{parentName:"p",href:"/opentwins/docs/installation/manual/essential#grafana-v95"},"essential functionality")," you should already have it configured.)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:"title=values.yaml",title:"values.yaml"},"grafana.ini:\n  plugins:\n    allow_loading_unsigned_plugins: ertis-opentwins,ertis-unity-panel\n")),(0,r.kt)("p",null,"Once this is configured, update the Grafana Helm deployment:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"helm upgrade grafana grafana/grafana -n opentwins --version 8.5.0 -f values.yaml\n")),(0,r.kt)("p",null,"Verify that the Grafana pod is in Running and Ready state. The Unity panel plugin should now be available in Grafana as a panel type.")),(0,r.kt)(l.Z,{value:"local",label:"Local",mdxType:"TabItem"},(0,r.kt)("p",null,"To install the plugin on a locally hosted Grafana instance, follow these steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/ertis-research/grafana-panel-unity/releases/download/latest/ertis-unity-panel.zip"},"Download the zip file")," of the latest plugin release.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Locate the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://grafana.com/docs/grafana/v11.3/setup-grafana/configure-grafana"},"Grafana configuration file"))," on your system. Refer to the ",(0,r.kt)("a",{parentName:"p",href:"https://grafana.com/docs/grafana/v11.3/setup-grafana/configure-grafana/#configuration-file-location"},"Grafana documentation")," to find its exact location, name, and how to modify it.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Open the configuration file and ",(0,r.kt)("strong",{parentName:"p"},"uncomment/add")," the following:"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"[plugins]\n# Enter a comma-separated list of plugin identifiers to identify plugins to load even if they are unsigned. Plugins with modified signatures are never loaded.\nallow_loading_unsigned_plugins = ertis-unity-panel\n")),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In the same configuration file, check or modify the ",(0,r.kt)("strong",{parentName:"p"},"path to the plugins folder")," (",(0,r.kt)("a",{parentName:"p",href:"https://grafana.com/docs/grafana/v11.3/setup-grafana/configure-grafana/#plugins"},"see Grafana documentation"),").")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Navigate to the plugins folder and extract the downloaded zip file. Ensure the extracted folder is named ",(0,r.kt)("inlineCode",{parentName:"p"},"ertis-unity-panel")," and contains the correct structure (no intermediate folders)."))),(0,r.kt)("center",null,(0,r.kt)("img",{src:a(6067).Z,alt:"Kubectl get services",style:{width:700}})),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},"Restart Grafana for the changes to take effect. Consult the ",(0,r.kt)("a",{parentName:"li",href:"https://grafana.com/docs/grafana/v11.3/setup-grafana/start-restart-grafana/"},"Grafana restart guide")," for specific instructions based on your operating system.")),(0,r.kt)("p",null,"The Unity panel plugin should now be available as a panel type in Grafana."))),(0,r.kt)("h2",{id:"connect"},"Connect"),(0,r.kt)("p",null,"This plugin ",(0,r.kt)("strong",{parentName:"p"},"does not require any additional configuration to connect"),". It should be available in Grafana's plugin list and as an option in the plugin types when creating a panel in a dashboard."))}f.isMDXComponent=!0},6067:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/opentwins-plugin-panel-content-7913062fb966adc93dcc5c4b3dabbd38.png"}}]);